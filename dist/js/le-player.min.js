!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var h=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(1),l=d(k);!function(){var a=function(a,b){var c="backward",d="divider",k="download",m="forward",n="fullscreen",o="play",p="rate",q="source",r="subtitle",s="timeline",t="volume",u=l["default"].extend(!0,{autoplay:!1,height:"auto",loop:!1,muted:!1,preload:"metadata",poster:null,width:"auto",rate:{step:.25,min:.5,max:4},playback:{step:{"short":5,medium:30,"long":60}},volume:{step:.1},controls:{common:[["play","volume","divider","timeline","divider","fullscreen"],["rate","divider","backward","divider","source","divider","subtitle","divider","download"]],fullscreen:[["play","volume","divider","timeline","divider","rate","divider","backward","divider","source","divider","subtitle","divider","download","divider","fullscreen"]]}},b),v=function(){function a(b,c){g(this,a),this.element=(0,l["default"])("<div />").addClass("control "+b).append((0,l["default"])("<i />").addClass("fa fa-"+c))}return j(a,null,[{key:"divider",value:function(){return(0,l["default"])("<div />").addClass("divider")}},{key:"create",value:function(a){switch(a){case c:return new y;case d:return this.divider();case k:return new z;case m:return new A;case n:return new B;case o:return new C;case p:return new D;case q:return new E;case r:return new F;case s:return new G;case t:return new H;default:return null}}}]),a}(),w=function(){function a(b){g(this,a),this.element=(0,l["default"])("<div />").addClass("control-text "+b)}return j(a,[{key:"text",set:function(a){this.element.html(a)}}]),a}(),x=function(){function a(b){g(this,a);var c=this;this.iconClass=b,this.icon=(0,l["default"])("<div />").addClass("control-icon").append((0,l["default"])("<i />").addClass("fa fa-"+b)),this.listElement=(0,l["default"])("<div/>").addClass("control-inner"),this.element=(0,l["default"])("<div />").addClass("control control-container").append(this.icon).append(this.listElement),this._index=0,this.list=[],this.icon.click(function(){c.onContainerClick()})}return j(a,[{key:"addItem",value:function(a,b){var c=this,d=(0,l["default"])("<div />").addClass("inner-item").data("index",this._index).html(a).click(function(){c.onItemClick((0,l["default"])(this).data("index"))});if("object"==("undefined"==typeof b?"undefined":i(b)))for(var e in b)d.data(e,b[e]);return this._index++,this.list.push(d),this.listElement.append(d),d}},{key:"getByIndex",value:function(a){for(var b in this.list)if(this.list[b].data("index")==a)return this.list[b];return null}},{key:"onContainerClick",value:function(){}},{key:"onItemClick",value:function(a){this.active=a}},{key:"active",get:function(){for(var a in this.list)if(this.list[a].hasClass("active"))return this.list[a];return null},set:function(a){var b=!1;for(var c in this.list)this.list[c].data("index")==a?(this.list[c].addClass("active"),this.icon.html(this.list[c].html()),b=!0):this.list[c].removeClass("active");b||this.icon.html((0,l["default"])("<i />").addClass("fa fa-"+this.iconClass))}}]),a}(),y=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"backward","undo"));return a.element.click(function(a){aa(O.currentTime-u.playback.step.medium>0?O.currentTime-u.playback.step.medium:0)}),a}return f(b,a),b}(v),z=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"",""));return a.element=(0,l["default"])("<a />").attr("href","").attr("target","_blank").attr("download","").addClass("control download").append((0,l["default"])("<i />").addClass("fa fa-download")),a}return f(b,a),j(b,[{key:"link",set:function(a){this.element.attr("href",a)}}]),b}(v),A=function(a){function b(){return g(this,b),e(this,Object.getPrototypeOf(b).call(this,"forward","redo"))}return f(b,a),b}(v),B=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"fullscreen","arrows-alt"));return a.element.click(function(a){L.toggle()}),a}return f(b,a),b}(v),C=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"play","play"));return a.element.click(function(a){$()}),a}return f(b,a),j(b,[{key:"pause",value:function(){this.element.children(".fa").removeClass("fa-pause").addClass("fa-play")}},{key:"play",value:function(){this.element.children(".fa").removeClass("fa-play").addClass("fa-pause")}}]),b}(v),D=function(){function a(){var b=this;g(this,a),this.down=new v("rate-down","backward"),this.up=new v("rate-up","forward"),this.current=new w("rate-current"),this.down.element.click(function(a){b.decrease()}),this.up.element.click(function(a){b.increase()}),this.element=(0,l["default"])("<div />").addClass("control-container").append(this.down.element).append(this.current.element).append(this.up.element)}return j(a,[{key:"decrease",value:function(){O.playbackRate>u.rate.min?(this.up.element.removeClass("disabled"),O.playbackRate-=u.rate.step,this.show(),I.set("rate",O.playbackRate)):this.down.element.addClass("disabled")}},{key:"load",value:function(){O.playbackRate=I.get("rate",1),this.show()}},{key:"show",value:function(){this.current.text="Ã—"+O.playbackRate.toFixed(2)}},{key:"increase",value:function(){O.playbackRate<u.rate.max?(this.down.element.removeClass("disabled"),O.playbackRate+=u.rate.step,this.show(),I.set("rate",O.playbackRate)):this.up.element.addClass("disabled")}}]),a}(),E=function(b){function c(){g(this,c);var a=e(this,Object.getPrototypeOf(c).call(this,"bullseye"));if(M.length>1)for(var b in M)a.addItem(M[b].title,{src:M[b].src});return a}return f(c,b),j(c,[{key:"set",value:function(b){var c=this.getByIndex(b);null!=c&&(a.attr("src",c.data("src")),P.download=c.data("src"))}},{key:"onItemClick",value:function(a){h(Object.getPrototypeOf(c.prototype),"onItemClick",this).call(this,a),this.set(a)}}]),c}(x),F=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"commenting-o"));if(N.length>0)for(var c in N)a.addItem(N[c].title,{src:N[c].src,language:N[c].language});return a}return f(b,a),j(b,[{key:"onContainerClick",value:function(){if(h(Object.getPrototypeOf(b.prototype),"onContainerClick",this).call(this),h(Object.getPrototypeOf(b.prototype),"onItemClick",this).call(this,-1),O.textTracks.length>0)for(var a=0;a<O.textTracks.length;a++)O.textTracks[a].mode="hidden"}},{key:"onItemClick",value:function(a){h(Object.getPrototypeOf(b.prototype),"onItemClick",this).call(this,a),this.track=a}},{key:"track",set:function(a){var b=this.getByIndex(a);if(null!=b&&O.textTracks.length>0)for(var c=b.data("language"),d=0;d<O.textTracks.length;d++)O.textTracks[d].language==c?O.textTracks[d].mode="showing":O.textTracks[d].mode="hidden"}}]),b}(x),G=function(){function a(){var b=this;g(this,a);this.drag=!1,this.current=new w("time-current"),this.total=new w("time-total"),this.marker=(0,l["default"])("<div />").addClass("time-marker"),this.markerShadow=(0,l["default"])("<div />").addClass("time-marker shadow").append().hide(),this.markerShadowTime=(0,l["default"])("<div />").addClass("time"),this.markerTime=(0,l["default"])("<div />").addClass("time").hide(),this.played=(0,l["default"])("<div />").addClass("time-played"),this.current.text="00:00",this.line=(0,l["default"])("<div />").addClass("timeline").append(this.marker.append(this.markerTime)).append(this.markerShadow.append(this.markerShadowTime)).append(this.played).on({mousemove:function(a){if(!b.drag){var c=b.getPosition(a.pageX);c>0&&1>c?(b.markerShadow.show(),b.markerShadow.css("left",100*c+"%"),b.markerShadowTime.html(_(O.duration*c))):b.markerShadow.hide()}},mouseleave:function(a){b.drag||b.markerShadow.hide()},click:function(a){b.drag||aa(O.duration*b.getPosition(a.pageX))}}),this.element=(0,l["default"])("<div />").addClass("timeline-container").append((0,l["default"])("<div />").addClass("timeline-subcontainer").append(this.current.element).append(this.line).append(this.total.element)),this.marker.on("mousedown",function(a){1==a.which&&(b.markerShadow.hide(),b.drag=!0)}),(0,l["default"])(document).on({mousemove:function(a){if(b.drag){var c=b.getPosition(a.pageX);c>0&&1>c&&(b.markerTime.show().html(_(O.duration*c)),aa(O.duration*c))}},mouseup:function(a){b.markerTime.hide(),b.drag=!1}})}return j(a,[{key:"getPosition",value:function(a){return(a-this.line.offset().left)/this.line.width()}},{key:"move",value:function(){var a=(O.currentTime/O.duration*100).toFixed(2);100==a&&P.pause(),this.marker.css("left",a+"%"),this.played.css("width",a+"%"),this.current.text=_(O.currentTime)}}]),a}(),H=function(){function a(){var b=this;g(this,a);var c=this;this.icon=(0,l["default"])("<div/>").addClass("control-icon").append((0,l["default"])("<i />").addClass("fa fa-volume-down")).click(function(){c.toggleMuted()}),this.marker=(0,l["default"])("<div/>").addClass("volume-marker"),this.active=(0,l["default"])("<div/>").addClass("volume-active"),this.line=(0,l["default"])("<div/>").addClass("volume-line").append(this.active).append(this.marker).on("click",function(a){if(!b.drag){var c=b.getPosition(a.pageY);c>=0&&1>=c&&(P.volume=1-c)}}),this.element=(0,l["default"])("<div />").addClass("control control-container").append(this.icon).append((0,l["default"])("<div />").addClass("control-inner volume-slider").append(this.line)),this.drag=!1,this.marker.on("mousedown",function(a){1==a.which&&(b.drag=!0)}),(0,l["default"])(document).on({mousemove:function(a){if(b.drag){var c=b.getPosition(a.pageY);c>=0&&1>=c&&(P.volume=1-c)}},mouseup:function(a){b.drag=!1}})}return j(a,[{key:"toggleMuted",value:function(){1==O.muted?this.value=I.get("volume",.4):this.value=0}},{key:"getPosition",value:function(a){return(a-this.line.offset().top)/this.line.height()}},{key:"value",set:function(a){var b=this.icon.children(".fa").eq(-1);b.removeClass(),.05>a?(O.muted=!0,b.addClass("fa fa-volume-off")):(O.muted=!1,O.volume=a,.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up"),I.set("volume",a));var c=Math.round(100*a).toString()+"%";this.active.css("height",c),this.marker.css("bottom",c)}}]),a}(),I=function(){function a(){g(this,a)}return j(a,null,[{key:"get",value:function(a,b){var c=document.cookie.split(";");for(var d in c){var e=c[d].trim().split("=");if(e[0]=="leplayer_"+a)return e[1]}return b}},{key:"set",value:function(a,b){var c=new Date;c.setDate(c.year+1),document.cookie="leplayer_"+a+"="+b+";expires="+c.toString()}}]),a}(),J=function(){function a(b,c){g(this,a),this.items=[],this.active=c||!1,this.name=b}return j(a,[{key:"add",value:function(a){return a==d?v.create(a):(this.items[a]=v.create(a),this.items[a].element)}},{key:"has",value:function(a){return"object"==i(this.items[a])}},{key:"hide",value:function(){Q.find(".controls-"+this.name).hide()}},{key:"init",value:function(){this.volume=I.get("volume",.4),this.initTimeline(),this.totalTime=_(O.duration),this.initRate()}},{key:"initRate",value:function(){this.has(p)&&this.items.rate.load()}},{key:"initTimeline",value:function(){this.has(s)&&this.items.timeline.element.width()<20&&this.items.timeline.element.hide()}},{key:"moveTimeMarker",value:function(){this.has(s)&&this.items.timeline.move()}},{key:"pause",value:function(){this.has(o)&&this.items.play.pause()}},{key:"play",value:function(){this.has(o)&&this.items.play.play()}},{key:"show",value:function(){Q.find(".controls-"+this.name).show()}},{key:"download",set:function(a){this.has(k)&&(this.items.download.link=a)}},{key:"source",set:function(a){this.has(q)&&this.items.source.set(a)}},{key:"totalTime",set:function(a){this.has(s)&&(this.items.timeline.total.text=a)}},{key:"volume",set:function(a){this.has(t)&&(this.items.volume.value=a)}}]),a}(),K=function(){function a(){g(this,a),this.collections={common:new J("common"),mini:new J("mini"),fullscreen:new J("fullscreen")},this.collections.common.active=!0}return j(a,[{key:"has",value:function(a){return"object"==i(this.collections[a])}},{key:"init",value:function(){for(var a in this.collections)this.collections[a].init();this.collections.common.show(),this.collections.mini.hide(),this.collections.fullscreen.hide()}},{key:"moveTimeMarker",value:function(){for(var a in this.collections)this.collections[a].moveTimeMarker()}},{key:"pause",value:function(){for(var a in this.collections)this.collections[a].pause()}},{key:"play",value:function(){for(var a in this.collections)this.collections[a].play()}},{key:"common",get:function(){return this.collections.common}},{key:"fullscreen",get:function(){return this.collections.fullscreen}},{key:"mini",get:function(){return this.collections.mini}},{key:"download",set:function(a){for(var b in this.collections)this.collections[b].download=a}},{key:"source",set:function(a){for(var b in this.collections)this.collections[b].source=a}},{key:"totalTime",set:function(a){for(var b in this.collections)this.collections[b].totalTime=a}},{key:"volume",set:function(a){for(var b in this.collections)this.collections[b].volume=a}}]),a}(),L=function(){function a(){g(this,a)}return j(a,null,[{key:"enabled",value:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)}},{key:"hideElements",value:function(){Q.removeClass("fullscreen"),P.fullscreen.hide(),P.common.show(),P.mini.hide()}},{key:"init",value:function(){this.enabled()&&(document.addEventListener("fullscreenchange",function(b){a.toggleElements(!(!document.fullScreen&&!document.fullscreenElement))},!1),document.addEventListener("webkitfullscreenchange",function(b){a.toggleElements(!!document.webkitIsFullScreen)},!1),document.addEventListener("mozfullscreenchange",function(){a.toggleElements(!!document.mozFullScreen)},!1),document.addEventListener("msfullscreenchange",function(){a.toggleElements(!!document.msFullscreenElement)},!1))}},{key:"is",value:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}},{key:"showElements",value:function(){Q.addClass("fullscreen"),P.fullscreen.show(),P.common.hide(),P.mini.hide()}},{key:"toggle",value:function(){if(this.is())document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.hideElements();else{var a=Q[0];a.requestFullScreen?a.requestFullScreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msExitFullscreen&&a.msRequestFullscreen(),this.showElements()}}},{key:"toggleElements",value:function(a){a?this.showElements():this.hideElements()}}]),a}(),M=[],N=[],O=null,P=new K,Q=null,R=null,S=function(){if("video"!=a.prop("tagName").toLowerCase())return console.warn("Incorrect element selected."),this;if(a.children("source").each(function(){var a=(0,l["default"])(this).attr("src");a&&M.push({src:a,title:(0,l["default"])(this).attr("title")})}),0==M.length){var b=a.attr("src");b&&M.push({src:b,title:(0,l["default"])(this).attr("title")||"default"})}return 0==M.length?(console.warn("No sources found."),this):(W(),U(),X(),T(),Y(),void V())},T=function(){for(var a in u.controls)if(P.has(a))for(var b in u.controls[a]){var c=u.controls[a][b],e=!1,f=(0,l["default"])("<div />").addClass("leplayer-controls controls-"+a);for(var g in c){var h=c[g];if(h==d||!P.collections[a].has(h)){var i=P.collections[a].add(h);null!=i?(f.append(i),h==s&&(e=!0)):console.warn("Cannot create "+h+" control for collection "+a+".")}}e||f.css("width","1px"),f.find(".divider + .divider").remove(),Q.append(f)}},U=function(){R=(0,l["default"])("<div />").addClass("play-overlay").html('<i class="fa fa-play"></i>');var b=(0,l["default"])("<div />").addClass("leplayer-video").append(R);Q=(0,l["default"])("<div />").addClass("leplayer-container").append(b).css("width",a.width()+"px"),a.before(Q),b.append(a),R.click(function(){$()})},V=function(){a.keypress(function(a){32==a.charCode&&$()}).click(function(){$()})},W=function(){a.removeAttr("controls");var b=a.attr("height");b&&(u.height=b+"px",a.removeAttr("height")),a.css("height",u.height);var c=a.attr("width");c&&(u.width=c+"px",a.removeAttr("width")),a.css("width",u.width);var d=a.attr("poster");d?u.poster=d:u.poster&&a.attr("poster",u.poster);var e=["autoplay","loop","muted"];for(var f in e){var g=a.attr(e[f]);g?u[e[f]]=!0:u[e[f]]?a.attr(e[f],""):a.removeAttr(e[f]),a.prop(e[f],u[e[f]])}var h=a.attr("preload");h&&(h=h.toLowerCase(),"none"==h||"metadata"==h?u.preload=h:u.preload="auto"),a.attr("preload",u.preload)},X=function(){a.children('track[kind="subtitles"]').each(function(){var a=(0,l["default"])(this).attr("srclang"),b=(0,l["default"])(this).attr("label"),c=(0,l["default"])(this).attr("src");b.length>0&&c.length>0&&N.push({title:b,src:c,language:a})})},Y=function(){O=a[0],O.readyState>HTMLMediaElement.HAVE_NOTHING?Z():O.onloadedmetadata=function(){Z()}},Z=function(){if(R.css("line-height",O.clientHeight+"px"),Q.css("width",O.clientWidth+"px"),O.ontimeupdate=function(){P.moveTimeMarker()},0==O.textTracks.length&&N.length>0){a.children('track[kind="subtitles"]').remove();for(var b in N)a.append((0,l["default"])("<track/>").attr("label",N[b].title).attr("src",N[b].src).attr("srclang",N[b].language).attr("id",N[b].language).attr("kind","subtitles"))}L.init(),P.init()},$=function(){!O.played||O.paused?(R.hide(),O.play(),P.play()):(R.show(),O.pause(),P.pause())},_=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60),e="";return b>0&&(e=b+":"),10>c&&(e+="0"),e+=c+":",10>d&&(e+="0"),e+=d},aa=function(a){O.currentTime=a};return S(),this};window.$.fn.lePlayer=function(b){return this.each(function(){a((0,l["default"])(this),b)})}}()},function(a,b){a.exports=$}]);