!function(a){"use strict";var b=function(b,c){var d=a.extend(!0,{autoplay:!1,height:"auto",loop:!1,muted:!1,preload:"metadata",poster:null,width:"auto",rate:{step:.25,min:.5,max:4},playback:{step:{"short":5,medium:30,"long":60}},volume:{step:.1},controls:[{element:null,controls:["play","volume","divider","timeline","divider","fullscreen"]},{element:null,controls:["rate","divider","backward","divider","sources","divider","subtitles","divider","download"]}]},c),e=function(){this.backward=null,this.download=null,this.forward=null,this.fullscreen=null,this.play=null,this.rate=null,this.sources=null,this.subtitles=null,this.timeline=null,this.volume=null};e.prototype.createSimple=function(b,c){return a("<div />").addClass("control "+b).append(a("<i />").addClass("fa fa-"+c))},e.prototype.create=function(b){switch(b){case"backward":return this.backward=this.createSimple("backward","undo").click(function(){z(h.currentTime-d.playback.step.medium>0?h.currentTime-d.playback.step.medium:0)}),this.backward;case"divider":return a("<div />").addClass("divider");case"download":return this.download=a("<a />").attr("href","").attr("target","_blank").attr("download","").addClass("control download").append(a("<i />").addClass("fa fa-download")),this.download;case"forward":return this.forward=this.createSimple("forward","redo"),this.forward;case"fullscreen":return this.fullscreen=this.createSimple("fullscreen","arrows-alt").click(function(){x()}),this.fullscreen;case"play":return this.play=this.createSimple("play","play").click(function(){w()}),this.play;case"rate":return this.rate={down:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-backward")).click(function(){this.decrease()}),up:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-forward")).click(function(){this.increase()}),current:a("<div />").addClass("control-text rate-current"),display:function(){this.current.html("×"+h.playbackRate.toFixed(2))},increase:function(){h.playbackRate<d.rate.max?(this.down.removeClass("disabled"),h.playbackRate+=d.rate.step,this.display(),m("rate",h.playbackRate)):this.up.addClass("disabled")},decrease:function(){h.playbackRate>d.rate.min?(this.up.removeClass("disabled"),h.playbackRate-=d.rate.step,this.display(),m("rate",h.playbackRate)):this.down.addClass("disabled")}},a("<div />").addClass("control-container").append(this.rate.down).append(this.rate.current).append(this.rate.up);case"sources":if(f.length>1){this.sources={list:[],icon:a("<div />").addClass("control-icon").append(a("<i />").addClass("fa fa-bullseye")),setActive:function(a){for(var b in this.list)this.list[b].data("index")==a?this.list[b].addClass("active"):this.list[b].removeClass("active")}};var c=a("<div/>").addClass("control-inner");for(var e in f)this.sources.list.push(a("<div />").addClass("inner-item").data("index",e).html(f[e].title).click(function(){A(a(this).data("index"))}));for(var e in this.sources.list)c.append(this.sources.list[e]);return a("<div />").addClass("control control-container").append(this.sources.icon).append(c)}return null;case"subtitles":if(g.length>0){this.subtitles={list:[],icon:a("<div />").addClass("control-icon").append(a("<i />").addClass("fa fa-commenting-o")).click(function(){B(""),a(this).html(a("<i />").addClass("fa fa-commenting-o"))})};var c=a("<div/>").addClass("control-inner");for(var e in g)this.subtitles.list.push(a("<div />").addClass("inner-item").data("src",g[e].src).data("language",g[e].language).html(g[e].title).click(function(){B(a(this).data("language")),this.subtitles.icon.html(a(this).html())}));for(var e in this.subtitles.list)c.append(this.subtitles.list[e]);return a("<div />").addClass("control control-container").append(this.subtitles.icon).append(c)}return null;case"timeline":return this.time={current:a("<div />").addClass("control-text time-current").html("00:00"),total:a("<div />").addClass("control-text time-total"),line:a("<div />").addClass("timeline").click(function(a){z(h.duration*this.time.getPosition(a.pageX))}).mousemove(function(a){var b=this.time.getPosition(a.pageX);b>0&&1>b?(this.time.markerShadow.show(),this.time.markerShadow.css("left",100*b+"%"),this.time.markerShadowTime.html(y(h.duration*b))):this.time.markerShadow.hide()}).mouseleave(function(){this.time.markerShadow.hide()}),marker:a("<div />").addClass("time-marker"),markerShadow:a("<div />").addClass("time-marker shadow").append().hide(),markerShadowTime:a("<div/>").addClass("time"),played:a("<div />").addClass("time-played"),move:function(){var a=(h.currentTime/h.duration*100).toFixed(2)+"%";this.marker.css("left",a),this.played.css("width",a),this.current.html(y(h.currentTime))},getPosition:function(a){return(a-this.line.offset().left)/this.line.width()}},this.time.line.append(this.time.marker).append(this.time.markerShadow.append(this.time.markerShadowTime)).append(this.time.played),a("<div />").addClass("timeline-container").append(a("<div />").addClass("timeline-subcontainer").append(this.time.current).append(this.time.line).append(this.time.total));case"volume":var i=!1,j={bottom:0,height:0,top:0};return this.volume={active:a("<div/>").addClass("volume-active"),marker:a("<div/>").addClass("volume-marker").on("mousedown",function(a){i=!0,j.height=this.volume.line.height(),j.top=this.volume.line.offset().top,j.bottom=j.top+j.height}),icon:a("<div/>").addClass("control-icon").append(a("<i />").addClass("fa fa-volume-down")).click(function(){this.volume.toggleMuted()}),set:function(a){var b=this.icon.children(".fa").eq(0);b.removeClass(),.05>a?(h.muted=!0,b.addClass("fa fa-volume-off")):(h.muted=!1,h.volume=a,.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up"),m("volume",a));var c=Math.round(100*a).toString()+"%";this.active.css("height",c),this.marker.css("bottom",c)},toggleMuted:function(){1==h.muted?this.set(l("volume",.4)):this.set(0)}},this.volume.line=a("<div/>").addClass("volume-line").append(this.volume.active).append(this.volume.marker).click(function(a){j.height=this.volume.line.height(),j.top=this.volume.line.offset().top,j.bottom=j.top+j.height,a.pageY>=j.top&&a.pageY<=j.bottom&&this.volume.set((j.bottom-a.pageY)/j.height)}),this.volume.container=a("<div />").addClass("control control-container").append(this.volume.icon).append(a("<div />").addClass("control-inner volume-slider").append(this.volume.line)),a(document).on("mousemove",function(a){i&&a.pageY>=j.top&&a.pageY<=j.bottom&&this.volume.set((j.bottom-a.pageY)/j.height)}).on("mouseup",function(a){i=!1}),this.volume.container;default:return null}};var f=[],g=[],h=null,i={},j=null,k=null,l=function(a,b){var c=document.cookie.split(";");for(var d in c){var e=c[d].trim().split("=");if(e[0]=="leplayer_"+a)return e[1]}return b},m=function(a,b){var c=new Date;c.setDate(c.year+1),document.cookie="leplayer_"+a+"="+b+";expires="+c.toString()},n=function(b,c){return a("<div />").addClass("control "+b).append(a("<i />").addClass("fa fa-"+c))},o=function(b){switch(b){case"backward":return i.backward=n("backward","undo").click(function(){z(h.currentTime-d.playback.step.medium>0?h.currentTime-d.playback.step.medium:0)}),i.backward;case"divider":return a("<div />").addClass("divider");case"download":return i.download=a("<a />").attr("href","").attr("target","_blank").attr("download","").addClass("control download").append(a("<i />").addClass("fa fa-download")),i.download;case"forward":return i.forward=n("forward","redo"),i.forward;case"fullscreen":return i.fullscreen=n("fullscreen","arrows-alt").click(function(){x()}),i.fullscreen;case"play":return i.play=n("play","play").click(function(){w()}),i.play;case"rate":return i.rate={down:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-backward")).click(function(){i.rate.decrease()}),up:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-forward")).click(function(){i.rate.increase()}),current:a("<div />").addClass("control-text rate-current"),display:function(){this.current.html("×"+h.playbackRate.toFixed(2))},increase:function(){h.playbackRate<d.rate.max?(this.down.removeClass("disabled"),h.playbackRate+=d.rate.step,this.display(),m("rate",h.playbackRate)):this.up.addClass("disabled")},decrease:function(){h.playbackRate>d.rate.min?(this.up.removeClass("disabled"),h.playbackRate-=d.rate.step,this.display(),m("rate",h.playbackRate)):this.down.addClass("disabled")}},a("<div />").addClass("control-container").append(i.rate.down).append(i.rate.current).append(i.rate.up);case"sources":if(f.length>1){i.sources={list:[],icon:a("<div />").addClass("control-icon").append(a("<i />").addClass("fa fa-bullseye")),setActive:function(a){for(var b in this.list)this.list[b].data("index")==a?this.list[b].addClass("active"):this.list[b].removeClass("active")}};var c=a("<div/>").addClass("control-inner");for(var e in f)i.sources.list.push(a("<div />").addClass("inner-item").data("index",e).html(f[e].title).click(function(){A(a(this).data("index"))}));for(var e in i.sources.list)c.append(i.sources.list[e]);return a("<div />").addClass("control control-container").append(i.sources.icon).append(c)}return null;case"subtitles":if(g.length>0){i.subtitles={list:[],icon:a("<div />").addClass("control-icon").append(a("<i />").addClass("fa fa-commenting-o")).click(function(){B(""),a(this).html(a("<i />").addClass("fa fa-commenting-o"))})};var c=a("<div/>").addClass("control-inner");for(var e in g)i.subtitles.list.push(a("<div />").addClass("inner-item").data("src",g[e].src).data("language",g[e].language).html(g[e].title).click(function(){B(a(this).data("language")),i.subtitles.icon.html(a(this).html())}));for(var e in i.subtitles.list)c.append(i.subtitles.list[e]);return a("<div />").addClass("control control-container").append(i.subtitles.icon).append(c)}return null;case"timeline":return i.time={current:a("<div />").addClass("control-text time-current").html("00:00"),total:a("<div />").addClass("control-text time-total"),line:a("<div />").addClass("timeline").click(function(a){z(h.duration*i.time.getPosition(a.pageX))}).mousemove(function(a){var b=i.time.getPosition(a.pageX);b>0&&1>b?(i.time.markerShadow.show(),i.time.markerShadow.css("left",100*b+"%"),i.time.markerShadowTime.html(y(h.duration*b))):i.time.markerShadow.hide()}).mouseleave(function(){i.time.markerShadow.hide()}),marker:a("<div />").addClass("time-marker"),markerShadow:a("<div />").addClass("time-marker shadow").append().hide(),markerShadowTime:a("<div/>").addClass("time"),played:a("<div />").addClass("time-played"),move:function(){var a=(h.currentTime/h.duration*100).toFixed(2)+"%";this.marker.css("left",a),this.played.css("width",a),this.current.html(y(h.currentTime))},getPosition:function(a){return(a-this.line.offset().left)/this.line.width()}},i.time.line.append(i.time.marker).append(i.time.markerShadow.append(i.time.markerShadowTime)).append(i.time.played),a("<div />").addClass("timeline-container").append(a("<div />").addClass("timeline-subcontainer").append(i.time.current).append(i.time.line).append(i.time.total));case"volume":var j=!1,k={bottom:0,height:0,top:0};return i.volume={active:a("<div/>").addClass("volume-active"),marker:a("<div/>").addClass("volume-marker").on("mousedown",function(a){j=!0,k.height=i.volume.line.height(),k.top=i.volume.line.offset().top,k.bottom=k.top+k.height}),icon:a("<div/>").addClass("control-icon").append(a("<i />").addClass("fa fa-volume-down")).click(function(){i.volume.toggleMuted()}),set:function(a){var b=this.icon.children(".fa").eq(0);b.removeClass(),.05>a?(h.muted=!0,b.addClass("fa fa-volume-off")):(h.muted=!1,h.volume=a,.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up"),m("volume",a));var c=Math.round(100*a).toString()+"%";this.active.css("height",c),this.marker.css("bottom",c)},toggleMuted:function(){1==h.muted?this.set(l("volume",.4)):this.set(0)}},i.volume.line=a("<div/>").addClass("volume-line").append(i.volume.active).append(i.volume.marker).click(function(a){k.height=i.volume.line.height(),k.top=i.volume.line.offset().top,k.bottom=k.top+k.height,a.pageY>=k.top&&a.pageY<=k.bottom&&i.volume.set((k.bottom-a.pageY)/k.height)}),i.volume.container=a("<div />").addClass("control control-container").append(i.volume.icon).append(a("<div />").addClass("control-inner volume-slider").append(i.volume.line)),a(document).on("mousemove",function(a){j&&a.pageY>=k.top&&a.pageY<=k.bottom&&i.volume.set((k.bottom-a.pageY)/k.height)}).on("mouseup",function(a){j=!1}),i.volume.container;default:return null}},p=function(a){return i.hasOwnProperty(a)},q=function(){if("video"!=b.prop("tagName").toLowerCase())return console.warn("Incorrect element selected."),this;if(b.children("source").each(function(){var b=a(this).attr("src");b&&f.push({src:b,title:a(this).attr("title")})}),0==f.length){var c=b.attr("src");c&&f.push({src:c,title:a(this).attr("title")||"default"})}return 0==f.length?(console.warn("No sources found."),this):(u(),s(),v(),r(),t(),void A(0))},r=function(){for(var b in d.controls){var c=d.controls[b].element,e=!1;if(null==c&&(c=a("<div />").addClass("leplayer-controls")),0==c.length)console.warn("Error creating controls.");else{for(var f in d.controls[b].controls){var g=d.controls[b].controls[f];if("divider"==g||!p(g)){var k=o(g);null!=k&&k.length>0?(c.append(k),"timeline"==g&&(e=!0)):console.warn("Cannot create "+g+" control.")}}e||c.css("width","1px"),c.find(".divider+.divider").remove(),j.append(c)}}h.playbackRate=l("rate",1),i.rate.display(),i.volume.set(l("volume",.4)),i.time.line.width()<20&&i.time.line.hide()},s=function(){k=a("<div />").addClass("play-overlay");var c=a("<div />").addClass("leplayer-video").append(k);j=a("<div />").addClass("leplayer-container").append(c).css("width",b.width()+"px"),b.before(j),c.append(b),h=b[0],h.addEventListener("loadedmetadata",function(a){k.css("line-height",a.target.clientHeight+"px").html('<i class="fa fa-play"></i>'),j.css("width",a.target.clientWidth+"px"),"undefined"!=typeof i.time&&i.time.total.html(y(h.duration))}),h.ontimeupdate=function(){i.time.move()},k.click(function(){w()})},t=function(){b.keypress(function(a){32==a.charCode&&w()}).click(function(){w()})},u=function(){b.removeAttr("controls");var a=b.attr("height");a&&(d.height=a+"px",b.removeAttr("height")),b.css("height",d.height);var c=b.attr("width");c&&(d.width=c+"px",b.removeAttr("width")),b.css("width",d.width);var e=b.attr("poster");e?d.poster=e:d.poster&&b.attr("poster",d.poster);var f=["autoplay","loop","muted"];for(var g in f){var h=b.attr(f[g]);h?d[f[g]]=!0:d[f[g]]?b.attr(f[g],""):b.removeAttr(f[g]),b.prop(f[g],d[f[g]])}var i=b.attr("preload");i&&(i=i.toLowerCase(),"none"==i||"metadata"==i?d.preload=i:d.preload="auto"),b.attr("preload",d.preload)},v=function(){if(b.children('track[kind="subtitles"]').each(function(){var b=a(this).attr("srclang"),c=a(this).attr("label"),d=a(this).attr("src");c.length>0&&d.length>0&&g.push({title:c,src:d,language:b})}),0==h.textTracks.length&&g.length>0){b.children('track[kind="subtitles"]').remove();for(var c in g)b.append(a("<track/>").attr("label",g[c].title).attr("src",g[c].src).attr("srclang",g[c].language).attr("id",g[c].language).attr("kind","subtitles"))}},w=function(){!h.played||h.paused?(k.hide(),h.play(),"undefined"!=typeof i.play&&i.play.children(".fa").removeClass("fa-play").addClass("fa-pause")):(k.show(),h.pause(),"undefined"!=typeof i.play&&i.play.children(".fa").removeClass("fa-pause").addClass("fa-play"))},x=function(){h.requestFullScreen?h.requestFullScreen():h.webkitRequestFullScreen?h.webkitRequestFullScreen():h.mozRequestFullScreen?h.mozRequestFullScreen():console.warn("Cannot toggle fullscreen.")},y=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60),e="";return b>0&&(e=b+":"),10>c&&(e+="0"),e+=c+":",10>d&&(e+="0"),e+=d},z=function(a){h.currentTime=a},A=function(a){"undefined"!=typeof f[a]&&(b.attr("src",f[a].src),"undefined"!=typeof i.sources&&i.sources.setActive(a),"undefined"!=typeof i.download&&i.download.attr("href",f[a].src).attr("download",f[a].src))},B=function(a){if(h.textTracks.length>0)for(var b=0;b<h.textTracks.length;b++)h.textTracks[b].language==a?h.textTracks[b].mode="showing":h.textTracks[b].mode="hidden"};return q(),this};a.fn.lePlayer=function(c){return this.each(function(){b(a(this),c)})}}(jQuery);