!function(a){"use strict";var b=function(b,c){var d=a.extend(!0,{autoplay:!1,height:"auto",loop:!1,muted:!1,preload:"metadata",poster:null,width:"auto",rate:{step:.25,min:.5,max:4},playback:{step:{"short":5,medium:30,"long":60}},volume:{step:.1},controls:[{element:null,controls:["play","volume","divider","timeline","divider","fullscreen"]},{element:null,controls:["rate","divider","backward","divider","captions","divider","download"]}]},c),e=[],f=b[0],g={};if("video"!=b.prop("tagName").toLowerCase())return console.warn("Incorrect element selected."),this;if(b.children("source").each(function(){var b=a(this).attr("src");b&&e.push(b)}),0==e.length){var h=b.attr("src");h&&e.push(b.attr("src"))}if(0==e.length)return console.warn("No sources found."),this;b.attr("src",e[0]),b.removeAttr("controls");var i=b.attr("height");i&&(d.height=i+"px",b.removeAttr("height")),b.css("height",d.height);var j=b.attr("width");j&&(d.width=j+"px",b.removeAttr("width")),b.css("width",d.width);var k=b.attr("poster");k?d.poster=k:d.poster&&b.attr("poster",d.poster);var l=["autoplay","loop","muted"];for(var m in l){var n=b.attr(l[m]);n?d[l[m]]=!0:d[l[m]]?b.attr(l[m],""):b.removeAttr(l[m]),b.prop(l[m],d[l[m]])}var k=b.attr("preload");k&&(k=k.toLowerCase(),"none"==k||"metadata"==k?d.preload=k:d.preload="auto"),b.attr("preload",d.preload);var o=function(b){switch(b){case"backward":return g.backward=a("<div />").addClass("control backward").append(a("<i />").addClass("fa fa-undo")),g.backward;case"captions":return g.captions=a("<div />").addClass("control captions").append(a("<i />").addClass("fa fa-commenting-o")),g.captions;case"divider":return a("<div />").addClass("divider");case"download":return g.download=a("<div />").addClass("control download").append(a("<i />").addClass("fa fa-download")),g.download;case"forward":return g.forward=a("<div />").addClass("control forkward").append(a("<i />").addClass("fa fa-redo")),g.forward;case"fullscreen":return g.fullscreen=a("<div />").addClass("control fullscreen").append(a("<i />").addClass("fa fa-arrows-alt")),g.fullscreen;case"play":return g.play=a("<div />").addClass("control play").append(a("<i />").addClass("fa fa-play")),g.play;case"rate":return g.rate={down:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-backward")),up:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-forward")),current:a("<div />").addClass("control-text rate-current")},a("<div />").addClass("control-container").append(g.rate.down).append(g.rate.current).append(g.rate.up);case"timeline":return g.time={current:a("<div />").addClass("control-text time-current"),total:a("<div />").addClass("control-text time-total"),line:a("<div />").addClass("timeline")},a("<div />").addClass("timeline-container").append(a("<div />").addClass("timeline-subcontainer").append(g.time.current).append(g.time.line).append(g.time.total));case"volume":return g.volume={active:a("<div/>").addClass("volume-active"),marker:a("<div/>").addClass("volume-marker"),icon:a("<div/>").addClass("volume-icon").append(a("<i />").addClass("fa fa-volume-down"))},g.volume.line=a("<div/>").addClass("volume-line").append(g.volume.active).append(g.volume.marker),g.volume.container=a("<div />").addClass("control volume-container").append(g.volume.icon).append(a("<div />").addClass("volume-slider").append(g.volume.line)),g.volume.container;default:return null}},p=function(b){switch(b){case"fullscreen":g.fullscreen.click(function(){s()});break;case"play":g.play.click(function(){r()});break;case"volume":var c=!1,d={bottom:0,height:0,top:0};g.volume.marker.on("mousedown",function(a){c=!0,d.height=g.volume.line.height(),d.top=g.volume.line.offset().top,d.bottom=d.top+d.height}),a(document).on("mousemove",function(a){c&&a.pageY>=d.top&&a.pageY<=d.bottom&&u((d.bottom-a.pageY)/d.height)}).on("mouseup",function(a){c=!1}),g.volume.icon.click(function(){t()}),u(.4)}},q=a("<div />").addClass("play-overlay"),r=function(){!f.played||f.paused?(q.hide(),f.play(),"undefined"!=typeof g.play&&g.play.children(".fa").removeClass("fa-play").addClass("fa-pause")):(q.show(),f.pause(),"undefined"!=typeof g.play&&g.play.children(".fa").removeClass("fa-pause").addClass("fa-play"))},s=function(){f.requestFullScreen?f.requestFullScreen():f.webkitRequestFullScreen?f.webkitRequestFullScreen():f.mozRequestFullScreen?f.mozRequestFullScreen():console.warn("Cannot toggle fullscreen.")},t=function(){u(1==f.muted?.4:0)},u=function(a){var b=g.volume.icon.children(".fa").eq(0);b.removeClass(),.05>a?(f.muted=!0,b.addClass("fa fa-volume-off")):(f.muted=!1,f.volume=a,.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up"));var c=Math.round(100*a).toString()+"%";g.volume.active.css("height",c),g.volume.marker.css("bottom",c)},v=a("<div />").addClass("leplayer-video"),w=a("<div />").addClass("leplayer-container").append(v);b.wrap(w),v=b.parent(),v.append(q),w=v.parent(),setTimeout(function(){q.css("line-height",q.height()+"px").html('<i class="fa fa-play"></i>')},100),q.click(function(){r()}),b.keypress(function(a){32==a.charCode&&r()}).click(function(){r()});for(var m in d.controls){var x=d.controls[m].element;if(null==x&&(x=a("<div />").addClass("leplayer-controls")),0==x.length)console.warn("Error creating controls.");else{for(var y in d.controls[m].controls){var z=o(d.controls[m].controls[y]);null!=z&&z.length>0?(x.append(z),p(d.controls[m].controls[y])):console.warn("Cannot create "+d.controls[m].controls[y]+" control.")}w.append(x)}}};a.fn.lePlayer=function(c){return this.each(function(){b(a(this),c)})}}(jQuery);