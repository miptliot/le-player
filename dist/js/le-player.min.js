!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function n(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:n(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(1),l=d(k),m=function(a,b){var c="backward",d="divider",k="download",m="forward",n="fullscreen",o="play",p="rate",q="source",r="sources",s="subtitle",t="subtitles",u="timeline",v="volume",w=l["default"].extend(!0,{autoplay:!1,height:"auto",loop:!1,muted:!1,preload:"metadata",poster:null,width:"auto",rate:{step:.25,min:.5,max:4},playback:{step:{"short":5,medium:30,"long":60}},volume:{step:.1},controls:[{element:null,controls:["play","volume","divider","timeline","divider","fullscreen"]},{element:null,controls:["rate","divider","backward","divider","sources","divider","subtitles","divider","download"]}]},b),x=function(){function a(b,c){g(this,a),this.element=(0,l["default"])("<div />").addClass("control "+b).append((0,l["default"])("<i />").addClass("fa fa-"+c))}return j(a,null,[{key:"divider",value:function(){return(0,l["default"])("<div />").addClass("divider")}},{key:"create",value:function(a){switch(a){case c:return new A;case d:return this.divider();case k:return new B;case m:return new C;case n:return new D;case o:return new E;case p:return new F;case q:case r:return new G;case s:case t:return new H;case u:return new I;case v:return new J;default:return null}}}]),a}(),y=function(){function a(b){g(this,a),this.element=(0,l["default"])("<div />").addClass("control-text "+b)}return j(a,[{key:"text",set:function(a){this.element.html(a)}}]),a}(),z=function(){function a(b){g(this,a),this.icon=(0,l["default"])("<div />").addClass("control-icon").append((0,l["default"])("<i />").addClass("fa "+b)),this.listElement=(0,l["default"])("<div/>").addClass("control-inner"),this.element=(0,l["default"])("<div />").addClass("control control-container").append(this.icon).append(this.listElement),this._index=0,this.list=[]}return j(a,[{key:"addItem",value:function(a,b){b=b||this._index;var c=(0,l["default"])("<div />").addClass("inner-item").data("index",b).html(a).click(function(){return this.onItemClick((0,l["default"])(this).data("index"))});return this._index++,this.list.push(c),this.listElement.append(c),c}},{key:"onItemClick",value:function(a){this.active=a}},{key:"active",set:function(a){for(var b in this.list)this.list[b].data("index")==a?(this.list[b].addClass("active"),this.icon.html(this.list[b].html)):this.list[b].removeClass("active")}}]),a}(),A=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"backward","undo"));return a.element.click(function(a){_(O.currentTime-w.playback.step.medium>0?O.currentTime-w.playback.step.medium:0)}),a}return f(b,a),b}(x),B=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"",""));return a.element=(0,l["default"])("<a />").attr("href","").attr("target","_blank").attr("download","").addClass("control download").append((0,l["default"])("<i />").addClass("fa fa-download")),a}return f(b,a),b}(x),C=function(a){function b(){return g(this,b),e(this,Object.getPrototypeOf(b).call(this,"forward","redo"))}return f(b,a),b}(x),D=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"fullscreen","arrows-alt"));return a.element.click(function(a){Z()}),a}return f(b,a),b}(x),E=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"play","play"));return a.element.click(function(a){Y()}),a}return f(b,a),b}(x),F=function(){function a(){var b=this;g(this,a),this.down=new x("rate-down","fa-backward"),this.up=new x("rate-up","fa-forward"),this.current=new y("rate-current"),this.down.element.click(function(a){b.decrease()}),this.up.element.click(function(a){b.increase()}),this.element=(0,l["default"])("<div />").addClass("control-container").append(this.down.element).append(this.current.element).append(this.up.element)}return j(a,[{key:"decrease",value:function(){O.playbackRate>w.rate.min?(this.up.element.removeClass("disabled"),O.playbackRate-=w.rate.step,this.show(),K.set("rate",O.playbackRate)):this.down.element.addClass("disabled")}},{key:"show",value:function(){this.current.text="Ã—"+O.playbackRate.toFixed(2)}},{key:"increase",value:function(){O.playbackRate<w.rate.max?(this.down.element.removeClass("disabled"),O.playbackRate+=w.rate.step,this.show(),K.set("rate",O.playbackRate)):this.up.element.addClass("disabled")}}]),a}(),G=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"fa-bullseye"));if(M.length>1)for(var c in M)a.addItem(M[c].title);return a}return f(b,a),j(b,[{key:"onItemClick",value:function(a){i(Object.getPrototypeOf(b.prototype),"onItemClick",this).call(this,a),aa(a)}}]),b}(z),H=function(a){function b(){g(this,b);var a=e(this,Object.getPrototypeOf(b).call(this,"fa-commenting-o"));if(N.length>0)for(var c in N)a.addItem(N[c].title,N[c].language).data("src",N[c].src);return ba(""),a}return f(b,a),j(b,[{key:"onItemClick",value:function(a){i(Object.getPrototypeOf(b.prototype),"onItemClick",this).call(this,a),ba(a)}}]),b}(z),I=function(){function a(){g(this,a),this.current=new y("time-current"),this.total=new y("time-total"),this.marker=(0,l["default"])("<div />").addClass("time-marker"),this.markerShadow=(0,l["default"])("<div />").addClass("time-marker shadow").append().hide(),this.markerShadowTime=(0,l["default"])("<div />").addClass("time"),this.played=(0,l["default"])("<div />").addClass("time-played"),this.line=(0,l["default"])("<div />").addClass("timeline").click(function(a){_(O.duration*this.getPosition(a.pageX))}).mousemove(function(a){var b=this.getPosition(a.pageX);b>0&&1>b?(this.markerShadow.show(),this.markerShadow.css("left",100*b+"%"),this.markerShadowTime.html($(O.duration*b))):this.markerShadow.hide()}).mouseleave(function(){this.markerShadow.hide()}),this.element=(0,l["default"])("<div />").addClass("timeline-container").append((0,l["default"])("<div />").addClass("timeline-subcontainer").append(this.current).append(this.line).append(this.total))}return j(a,[{key:"getPosition",value:function(a){return(a-this.line.offset().left)/this.line.width()}},{key:"move",value:function(){var a=(O.currentTime/O.duration*100).toFixed(2)+"%";this.marker.css("left",a),this.played.css("width",a),this.current.text=$(O.currentTime)}}]),a}(),J=function(){function a(){g(this,a),this.drag=!1,this.range={bottom:0,height:0,top:0},this.active=(0,l["default"])("<div/>").addClass("volume-active"),this.marker=(0,l["default"])("<div/>").addClass("volume-marker").on("mousedown",function(a){this.drag=!0,this.range.height=this.line.height(),this.range.top=this.line.offset().top,this.range.bottom=this.range.top+this.range.height}),this.icon=(0,l["default"])("<div/>").addClass("control-icon").append((0,l["default"])("<i />").addClass("fa fa-volume-down")).click(function(){this.toggleMuted()}),this.line=(0,l["default"])("<div/>").addClass("volume-line").append(this.active).append(this.marker).click(function(a){this.range.height=this.line.height(),this.range.top=this.line.offset().top,this.range.bottom=this.range.top+this.range.height,a.pageY>=range.top&&a.pageY<=this.range.bottom&&(this.value=(this.range.bottom-a.pageY)/this.range.height)}),this.element=(0,l["default"])("<div />").addClass("control control-container").append(this.icon).append((0,l["default"])("<div />").addClass("control-inner volume-slider").append(this.line)),(0,l["default"])(document).on("mousemove",function(a){this.drag&&a.pageY>=this.range.top&&a.pageY<=this.range.bottom&&(this.value=(range.bottom-a.pageY)/range.height)}).on("mouseup",function(a){this.drag=!1})}return j(a,[{key:"toggleMuted",value:function(){1==O.muted?this.value=K.get("volume",.4):this.value=0}},{key:"value",set:function(a){var b=this.icon.children(".fa").eq(0);b.removeClass(),.05>a?(O.muted=!0,b.addClass("fa fa-volume-off")):(O.muted=!1,O.volume=a,.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up"),K.set("volume",a));var c=Math.round(100*a).toString()+"%";this.active.css("height",c),this.marker.css("bottom",c)}}]),a}(),K=function(){function a(){g(this,a)}return j(a,null,[{key:"get",value:function(a,b){var c=document.cookie.split(";");for(var d in c){var e=c[d].trim().split("=");if(e[0]=="leplayer_"+a)return e[1]}return b}},{key:"set",value:function(a,b){var c=new Date;c.setDate(c.year+1),document.cookie="leplayer_"+a+"="+b+";expires="+c.toString()}}]),a}(),L=function(){function a(b){g(this,a),this.items=[],this.active=b||!1}return j(a,[{key:"add",value:function(a){return a==d?x.create(a):(this.items[a]=x.create(a),this.items[a].element)}},{key:"has",value:function(a){return"object"==h(this.items[a])}},{key:"init",value:function(){this.showRate(),this.volume=K.get("volume",.4),this.initTimeline()}},{key:"initTimeline",value:function(){this.has(u)&&this.items.timeline.element.width()<20&&this.items.timeline.element.hide()}},{key:"showRate",value:function(){this.has(p)&&this.items.rate.show()}},{key:"volume",set:function(a){this.has(v)&&(this.items.volume.value=a)}}]),a}(),M=(function(){function a(){g(this,a),this.collections={common:new L,mini:new L,fullscreen:new L},this.collections.common.active=!0}return j(a,[{key:"init",value:function(){for(var a in this.collections)this.collections[a].init()}}]),a}(),[]),N=[],O=null,P={collections:{common:new L,mini:new L,fullscreen:new L},init:function(){for(var a in this.collections)this.collections[a].init()},showRate:function(){for(var a in this.collections)this.collections[a].active&&this.collections[a].init()}},Q=null,R=null,S=function(){if("video"!=a.prop("tagName").toLowerCase())return console.warn("Incorrect element selected."),this;if(a.children("source").each(function(){var a=(0,l["default"])(this).attr("src");a&&M.push({src:a,title:(0,l["default"])(this).attr("title")})}),0==M.length){var b=a.attr("src");b&&M.push({src:b,title:(0,l["default"])(this).attr("title")||"default"})}return 0==M.length?(console.warn("No sources found."),this):(W(),U(),X(),T(),V(),void aa(0))},T=function(){for(var a in w.controls){var b=w.controls[a].element,c=!1;if(null==b&&(b=(0,l["default"])("<div />").addClass("leplayer-controls")),0==b.length)console.warn("Error creating controls.");else{for(var e in w.controls[a].controls){var f=w.controls[a].controls[e];if(f==d||!P.common.has(f)){var g=P.common.add(f);null!=g?(b.append(g),f==u&&(c=!0)):console.warn("Cannot create "+f+" control.")}}c||b.css("width","1px"),b.find(".divider+.divider").remove(),Q.append(b)}}O.playbackRate=K.get("rate",1),P.common.init()},U=function(){R=(0,l["default"])("<div />").addClass("play-overlay");var b=(0,l["default"])("<div />").addClass("leplayer-video").append(R);Q=(0,l["default"])("<div />").addClass("leplayer-container").append(b).css("width",a.width()+"px"),a.before(Q),b.append(a),O=a[0],O.addEventListener("loadedmetadata",function(a){R.css("line-height",a.target.clientHeight+"px").html('<i class="fa fa-play"></i>'),Q.css("width",a.target.clientWidth+"px"),"undefined"!=typeof P.time&&P.time.total.html($(O.duration))}),O.ontimeupdate=function(){P.time.move()},R.click(function(){Y()})},V=function(){a.keypress(function(a){32==a.charCode&&Y()}).click(function(){Y()})},W=function(){a.removeAttr("controls");var b=a.attr("height");b&&(w.height=b+"px",a.removeAttr("height")),a.css("height",w.height);var c=a.attr("width");c&&(w.width=c+"px",a.removeAttr("width")),a.css("width",w.width);var d=a.attr("poster");d?w.poster=d:w.poster&&a.attr("poster",w.poster);var e=["autoplay","loop","muted"];for(var f in e){var g=a.attr(e[f]);g?w[e[f]]=!0:w[e[f]]?a.attr(e[f],""):a.removeAttr(e[f]),a.prop(e[f],w[e[f]])}var h=a.attr("preload");h&&(h=h.toLowerCase(),"none"==h||"metadata"==h?w.preload=h:w.preload="auto"),a.attr("preload",w.preload)},X=function(){if(a.children('track[kind="subtitles"]').each(function(){var a=(0,l["default"])(this).attr("srclang"),b=(0,l["default"])(this).attr("label"),c=(0,l["default"])(this).attr("src");b.length>0&&c.length>0&&N.push({title:b,src:c,language:a})}),0==O.textTracks.length&&N.length>0){a.children('track[kind="subtitles"]').remove();for(var b in N)a.append((0,l["default"])("<track/>").attr("label",N[b].title).attr("src",N[b].src).attr("srclang",N[b].language).attr("id",N[b].language).attr("kind","subtitles"))}},Y=function(){!O.played||O.paused?(R.hide(),O.play(),"undefined"!=typeof P.play&&P.play.children(".fa").removeClass("fa-play").addClass("fa-pause")):(R.show(),O.pause(),"undefined"!=typeof P.play&&P.play.children(".fa").removeClass("fa-pause").addClass("fa-play"))},Z=function(){O.requestFullScreen?O.requestFullScreen():O.webkitRequestFullScreen?O.webkitRequestFullScreen():O.mozRequestFullScreen?O.mozRequestFullScreen():console.warn("Cannot toggle fullscreen.")},$=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60),e="";return b>0&&(e=b+":"),10>c&&(e+="0"),e+=c+":",10>d&&(e+="0"),e+=d},_=function(a){O.currentTime=a},aa=function(b){"undefined"!=typeof M[b]&&(a.attr("src",M[b].src),"undefined"!=typeof P.sources&&P.sources.setActive(b),"undefined"!=typeof P.download&&P.download.attr("href",M[b].src).attr("download",M[b].src))},ba=function(a){if(O.textTracks.length>0)for(var b=0;b<O.textTracks.length;b++)O.textTracks[b].language==a?O.textTracks[b].mode="showing":O.textTracks[b].mode="hidden"};return S(),this};window.$.fn.lePlayer=function(a){return this.each(function(){m((0,l["default"])(this),a)})}},function(a,b){a.exports=$}]);