!function(a){"use strict";var b=function(b,c){var d=a.extend(!0,{autoplay:!1,height:"auto",loop:!1,muted:!1,preload:"metadata",poster:null,width:"auto",rate:{step:.25,min:.5,max:4},playback:{step:{"short":5,medium:30,"long":60}},volume:{step:.1},controls:[{element:null,controls:["play","volume","divider","timeline","divider","fullscreen"]},{element:null,controls:["rate","divider","backward","divider","captions","divider","download"]}]},c),e=[],f=b[0],g={};if("video"!=b.prop("tagName").toLowerCase())return console.warn("Incorrect element selected."),this;if(b.children("source").each(function(){var b=a(this).attr("src");b&&e.push(b)}),0==e.length){var h=b.attr("src");h&&e.push(b.attr("src"))}if(0==e.length)return console.warn("No sources found."),this;b.attr("src",e[0]),b.removeAttr("controls");var i=b.attr("height");i&&(d.height=i+"px",b.removeAttr("height")),b.css("height",d.height);var j=b.attr("width");j&&(d.width=j+"px",b.removeAttr("width")),b.css("width",d.width);var k=b.attr("poster");k?d.poster=k:d.poster&&b.attr("poster",d.poster);var l=["autoplay","loop","muted"];for(var m in l){var n=b.attr(l[m]);n?d[l[m]]=!0:d[l[m]]?b.attr(l[m],""):b.removeAttr(l[m]),b.prop(l[m],d[l[m]])}var k=b.attr("preload");k&&(k=k.toLowerCase(),"none"==k||"metadata"==k?d.preload=k:d.preload="auto"),b.attr("preload",d.preload);var o=function(a,b){var c=document.cookie.split(";");for(var d in c){var e=c[d].trim().split("=");if(e[0]=="leplayer_"+a)return e[1]}return b},p=function(a,b){var c=new Date;c.setDate(c.year+1),document.cookie="leplayer_"+a+"="+b+";expires="+c.toString()},q=function(b){switch(b){case"backward":return g.backward=a("<div />").addClass("control backward").append(a("<i />").addClass("fa fa-undo")),g.backward;case"captions":return g.captions=a("<div />").addClass("control captions").append(a("<i />").addClass("fa fa-commenting-o")),g.captions;case"divider":return a("<div />").addClass("divider");case"download":return g.download=a("<a />").attr("href",e[0]).attr("target","_blank").attr("download",e[0]).addClass("control download").append(a("<i />").addClass("fa fa-download")),g.download;case"forward":return g.forward=a("<div />").addClass("control forkward").append(a("<i />").addClass("fa fa-redo")),g.forward;case"fullscreen":return g.fullscreen=a("<div />").addClass("control fullscreen").append(a("<i />").addClass("fa fa-arrows-alt")),g.fullscreen;case"play":return g.play=a("<div />").addClass("control play").append(a("<i />").addClass("fa fa-play")),g.play;case"rate":return g.rate={down:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-backward")),up:a("<div />").addClass("control rate-down").append(a("<i />").addClass("fa fa-forward")),current:a("<div />").addClass("control-text rate-current"),display:function(){this.current.html("Ã—"+f.playbackRate.toFixed(2))},increase:function(){f.playbackRate<d.rate.max?(this.down.removeClass("disabled"),f.playbackRate+=d.rate.step,this.display(),p("rate",f.playbackRate)):this.up.addClass("disabled")},decrease:function(){f.playbackRate>d.rate.min?(this.up.removeClass("disabled"),f.playbackRate-=d.rate.step,this.display(),p("rate",f.playbackRate)):this.down.addClass("disabled")}},a("<div />").addClass("control-container").append(g.rate.down).append(g.rate.current).append(g.rate.up);case"timeline":return g.time={current:a("<div />").addClass("control-text time-current"),total:a("<div />").addClass("control-text time-total"),line:a("<div />").addClass("timeline")},a("<div />").addClass("timeline-container").append(a("<div />").addClass("timeline-subcontainer").append(g.time.current).append(g.time.line).append(g.time.total));case"volume":return g.volume={active:a("<div/>").addClass("volume-active"),marker:a("<div/>").addClass("volume-marker"),icon:a("<div/>").addClass("volume-icon").append(a("<i />").addClass("fa fa-volume-down")),set:function(a){var b=this.icon.children(".fa").eq(0);b.removeClass(),.05>a?(f.muted=!0,b.addClass("fa fa-volume-off")):(f.muted=!1,f.volume=a,.5>a?b.addClass("fa fa-volume-down"):b.addClass("fa fa-volume-up"),p("volume",a));var c=Math.round(100*a).toString()+"%";this.active.css("height",c),this.marker.css("bottom",c)},toggleMuted:function(){1==f.muted?this.set(o("volume",.4)):this.set(0)}},g.volume.line=a("<div/>").addClass("volume-line").append(g.volume.active).append(g.volume.marker),g.volume.container=a("<div />").addClass("control volume-container").append(g.volume.icon).append(a("<div />").addClass("volume-slider").append(g.volume.line)),g.volume.container;default:return null}},r=function(b){switch(b){case"backward":g.backward.click(function(){f.currentTime-d.playback.step.medium>0&&v(f.currentTime-d.playback.step.medium)});break;case"fullscreen":g.fullscreen.click(function(){u()});break;case"play":g.play.click(function(){t()});break;case"rate":f.playbackRate=o("rate",1),g.rate.display(),g.rate.up.click(function(){g.rate.increase()}),g.rate.down.click(function(){g.rate.decrease()});break;case"volume":var c=!1,e={bottom:0,height:0,top:0};g.volume.marker.on("mousedown",function(a){c=!0,e.height=g.volume.line.height(),e.top=g.volume.line.offset().top,e.bottom=e.top+e.height}),a(document).on("mousemove",function(a){c&&a.pageY>=e.top&&a.pageY<=e.bottom&&g.volume.set((e.bottom-a.pageY)/e.height)}).on("mouseup",function(a){c=!1}),g.volume.line.click(function(a){e.height=g.volume.line.height(),e.top=g.volume.line.offset().top,e.bottom=e.top+e.height,a.pageY>=e.top&&a.pageY<=e.bottom&&g.volume.set((e.bottom-a.pageY)/e.height)}),g.volume.icon.click(function(){g.volume.toggleMuted()}),g.volume.set(o("volume",.4))}},s=a("<div />").addClass("play-overlay"),t=function(){!f.played||f.paused?(s.hide(),f.play(),"undefined"!=typeof g.play&&g.play.children(".fa").removeClass("fa-play").addClass("fa-pause")):(s.show(),f.pause(),"undefined"!=typeof g.play&&g.play.children(".fa").removeClass("fa-pause").addClass("fa-play"))},u=function(){f.requestFullScreen?f.requestFullScreen():f.webkitRequestFullScreen?f.webkitRequestFullScreen():f.mozRequestFullScreen?f.mozRequestFullScreen():console.warn("Cannot toggle fullscreen.")},v=function(a){f.currentTime=a},w=a("<div />").addClass("leplayer-video"),x=a("<div />").addClass("leplayer-container").append(w);b.wrap(x),w=b.parent(),w.append(s),x=w.parent(),setTimeout(function(){s.css("line-height",s.height()+"px").html('<i class="fa fa-play"></i>')},100),s.click(function(){t()}),b.keypress(function(a){32==a.charCode&&t()}).click(function(){t()});for(var m in d.controls){var y=d.controls[m].element;if(null==y&&(y=a("<div />").addClass("leplayer-controls")),0==y.length)console.warn("Error creating controls.");else{for(var z in d.controls[m].controls){var A=q(d.controls[m].controls[z]);null!=A&&A.length>0?(y.append(A),r(d.controls[m].controls[z])):console.warn("Cannot create "+d.controls[m].controls[z]+" control.")}x.append(y)}}};a.fn.lePlayer=function(c){return this.each(function(){b(a(this),c)})}}(jQuery);